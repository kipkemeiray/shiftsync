{% extends "base.html" %}
{% block title %}My Shifts â€” ShiftSync{% endblock %}

{% block content %}
<h1 class="h3 mb-4 fw-bold"><i class="bi bi-calendar-check me-2 text-primary"></i>My Shifts</h1>

<div class="row g-4">
  <div class="col-lg-7">
    <h5 class="fw-semibold mb-3">Upcoming</h5>
    <div class="card border-0 shadow-sm">
      <div class="card-body p-0">
        <ul class="list-group list-group-flush">
          {% for a in upcoming %}
          <li class="list-group-item py-3">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="fw-semibold">
                  {{ a.shift.required_skill.display_name }}
                  <span class="text-muted fw-normal small">@ {{ a.shift.location.name }}</span>
                  {% if a.shift.is_premium %}
                    <span class="badge bg-warning text-dark ms-1">
                      <i class="bi bi-star-fill me-1"></i>Premium
                    </span>
                  {% endif %}
                </div>
                <div class="text-muted small mt-1">
                  <i class="bi bi-calendar3 me-1"></i>
                  {{ a.shift.start_utc|date:"l, F j, Y" }}
                  &middot; {{ a.shift.start_utc|date:"g:ia" }} &ndash; {{ a.shift.end_utc|date:"g:ia" }} UTC
                  &middot; {{ a.shift.duration_hours|floatformat:1 }}h
                </div>
              </div>
              <span class="badge {% if a.status == 'assigned' %}bg-success{% else %}bg-warning text-dark{% endif %}">
                {{ a.get_status_display }}
              </span>
            </div>
          </li>
          {% empty %}
          <li class="list-group-item text-center text-muted py-5">
            <i class="bi bi-calendar-x fs-2 d-block mb-2"></i>No upcoming shifts scheduled.
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

  <div class="col-lg-5">
    <h5 class="fw-semibold mb-3">Past Shifts (last 20)</h5>
    <div class="card border-0 shadow-sm">
      <div class="card-body p-0">
        <ul class="list-group list-group-flush">
          {% for a in past %}
          <li class="list-group-item py-2">
            <div class="fw-semibold small">{{ a.shift.required_skill.display_name }}</div>
            <div class="text-muted small">
              {{ a.shift.start_utc|date:"M j, Y" }} &middot; {{ a.shift.duration_hours|floatformat:1 }}h
              &middot; {{ a.shift.location.name }}
            </div>
          </li>
          {% empty %}
          <li class="list-group-item text-center text-muted py-4">No past shifts recorded.</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}